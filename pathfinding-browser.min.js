(e=>{var t;"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):("undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.PF=e())})(function(){return function n(o,r,a){function s(i,e){if(!r[i]){if(!o[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(l)return l(i,!0);throw new Error("Cannot find module '"+i+"'")}e=r[i]={exports:{}};o[i][0].call(e.exports,function(e){var t=o[i][1][e];return s(t||e)},e,e.exports,n,o,r,a)}return r[i].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,i){t.exports=e("./lib/heap")},{"./lib/heap":2}],2:[function(e,a,t){!function(){var c,l,d,f,t,h,i,g,b,e,n,o,u,p;function r(e){this.cmp=null!=e?e:c,this.nodes=[]}l=Math.floor,b=Math.min,c=function(e,t){return e<t?-1:t<e?1:0},g=function(e,t,i,n,o){var r;if(null==o&&(o=c),(i=null==i?0:i)<0)throw new Error("lo must be non-negative");for(null==n&&(n=e.length);i<n;)o(t,e[r=l((i+n)/2)])<0?n=r:i=r+1;return[].splice.apply(e,[i,i-i].concat(t)),t},f=function(e,t){var i,n;return null==t&&(t=c),i=e.pop(),e.length?(n=e[0],e[0]=i,p(e,0,t)):n=i,n},i=function(e,t,i){var n;return null==i&&(i=c),n=e[0],e[0]=t,p(e,0,i),n},h=function(e,t,i){var n;return null==i&&(i=c),e.length&&i(e[0],t)<0&&(t=(n=[e[0],t])[0],e[0]=n[1],p(e,0,i)),t},d=function(i,e){var t,n,o,r,a,s;for(null==e&&(e=c),a=[],n=0,o=(r=function(){s=[];for(var e=0,t=l(i.length/2);0<=t?e<t:t<e;0<=t?e++:e--)s.push(e);return s}.apply(this).reverse()).length;n<o;n++)t=r[n],a.push(p(i,t,e));return a},o=function(e,t,i){if(null==i&&(i=c),-1!==(t=e.indexOf(t)))return u(e,0,t,i),p(e,t,i)},e=function(e,t,i){var n,o,r,a,s;if(null==i&&(i=c),!(o=e.slice(0,t)).length)return o;for(d(o,i),r=0,a=(s=e.slice(t)).length;r<a;r++)n=s[r],h(o,n,i);return o.sort(i).reverse()},n=function(e,t,i){var n,o,r,a,s,l,h,u,p;if(null==i&&(i=c),10*t<=e.length){if((r=e.slice(0,t).sort(i)).length)for(o=r[r.length-1],a=0,l=(h=e.slice(t)).length;a<l;a++)i(n=h[a],o)<0&&(g(r,n,0,null,i),r.pop(),o=r[r.length-1]);return r}for(d(e,i),p=[],s=0,u=b(t,e.length);0<=u?s<u:u<s;0<=u?++s:--s)p.push(f(e,i));return p},u=function(e,t,i,n){var o,r,a;for(null==n&&(n=c),o=e[i];t<i&&n(o,r=e[a=i-1>>1])<0;)e[i]=r,i=a;return e[i]=o},p=function(e,t,i){var n,o,r,a,s;for(null==i&&(i=c),o=e.length,r=e[s=t],n=2*t+1;n<o;)(a=n+1)<o&&!(i(e[n],e[a])<0)&&(n=a),e[t]=e[n],n=2*(t=n)+1;return e[t]=r,u(e,s,t,i)},r.push=t=function(e,t,i){return null==i&&(i=c),e.push(t),u(e,0,e.length-1,i)},r.pop=f,r.replace=i,r.pushpop=h,r.heapify=d,r.updateItem=o,r.nlargest=e,r.nsmallest=n,r.prototype.push=function(e){return t(this.nodes,e,this.cmp)},r.prototype.pop=function(){return f(this.nodes,this.cmp)},r.prototype.peek=function(){return this.nodes[0]},r.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},r.prototype.replace=function(e){return i(this.nodes,e,this.cmp)},r.prototype.pushpop=function(e){return h(this.nodes,e,this.cmp)},r.prototype.heapify=function(){return d(this.nodes,this.cmp)},r.prototype.updateItem=function(e){return o(this.nodes,e,this.cmp)},r.prototype.clear=function(){return this.nodes=[]},r.prototype.empty=function(){return 0===this.nodes.length},r.prototype.size=function(){return this.nodes.length},r.prototype.clone=function(){var e=new r;return e.nodes=this.nodes.slice(0),e},r.prototype.toArray=function(){return this.nodes.slice(0)},r.prototype.insert=r.prototype.push,r.prototype.top=r.prototype.peek,r.prototype.front=r.prototype.peek,r.prototype.has=r.prototype.contains,r.prototype.copy=r.prototype.clone,e=r,null!=a&&a.exports?a.exports=e:window.Heap=e}.call(this)},{}],3:[function(e,t,i){t.exports={Heap:e("heap"),Node:e("./core/Node"),Grid:e("./core/Grid"),Util:e("./core/Util"),DiagonalMovement:e("./core/DiagonalMovement"),Heuristic:e("./core/Heuristic"),AStarFinder:e("./finders/AStarFinder"),BestFirstFinder:e("./finders/BestFirstFinder"),BreadthFirstFinder:e("./finders/BreadthFirstFinder"),DijkstraFinder:e("./finders/DijkstraFinder"),BiAStarFinder:e("./finders/BiAStarFinder"),BiBestFirstFinder:e("./finders/BiBestFirstFinder"),BiBreadthFirstFinder:e("./finders/BiBreadthFirstFinder"),BiDijkstraFinder:e("./finders/BiDijkstraFinder"),IDAStarFinder:e("./finders/IDAStarFinder"),JumpPointFinder:e("./finders/JumpPointFinder"),IDDFSFinder:e("./finders/IDDFSFinder")}},{"./core/DiagonalMovement":4,"./core/Grid":5,"./core/Heuristic":6,"./core/Node":7,"./core/Util":8,"./finders/AStarFinder":9,"./finders/BestFirstFinder":10,"./finders/BiAStarFinder":11,"./finders/BiBestFirstFinder":12,"./finders/BiBreadthFirstFinder":13,"./finders/BiDijkstraFinder":14,"./finders/BreadthFirstFinder":15,"./finders/DijkstraFinder":16,"./finders/IDAStarFinder":17,"./finders/IDDFSFinder":18,"./finders/JumpPointFinder":23,heap:1}],4:[function(e,t,i){t.exports={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4}},{}],5:[function(e,t,i){var s=e("./Node"),d=e("./DiagonalMovement");function l(e,t,i){var n;"object"!=typeof e?n=e:(t=e.length,n=e[0].length,i=e),this.width=n,this.height=t,this.nodes=this._buildNodes(n,t,i)}l.prototype._buildNodes=function(e,t,i){for(var n,o=new Array(t),r=0;r<t;++r)for(o[r]=new Array(e),n=0;n<e;++n)o[r][n]=new s(n,r);if(void 0!==i){if(i.length!==t||i[0].length!==e)throw new Error("Matrix size does not fit");for(r=0;r<t;++r)for(n=0;n<e;++n)i[r][n]&&(o[r][n].walkable=!1)}return o},l.prototype.getNodeAt=function(e,t){return this.nodes[t][e]},l.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable},l.prototype.isInside=function(e,t){return 0<=e&&e<this.width&&0<=t&&t<this.height},l.prototype.setWalkableAt=function(e,t,i){this.nodes[t][e].walkable=i},l.prototype.getNeighbors=function(e,t){var i=e.x,e=e.y,n=[],o=!1,r=!1,a=!1,s=!1,l=!1,h=!1,u=!1,p=!1,c=this.nodes;if(this.isWalkableAt(i,e-1)&&(n.push(c[e-1][i]),o=!0),this.isWalkableAt(i+1,e)&&(n.push(c[e][i+1]),a=!0),this.isWalkableAt(i,e+1)&&(n.push(c[e+1][i]),l=!0),this.isWalkableAt(i-1,e)&&(n.push(c[e][i-1]),u=!0),t!==d.Never){if(t===d.OnlyWhenNoObstacles)r=u&&o,s=o&&a,h=a&&l,p=l&&u;else if(t===d.IfAtMostOneObstacle)r=u||o,s=o||a,h=a||l,p=l||u;else{if(t!==d.Always)throw new Error("Incorrect value of diagonalMovement");p=h=s=r=!0}r&&this.isWalkableAt(i-1,e-1)&&n.push(c[e-1][i-1]),s&&this.isWalkableAt(i+1,e-1)&&n.push(c[e-1][i+1]),h&&this.isWalkableAt(i+1,e+1)&&n.push(c[e+1][i+1]),p&&this.isWalkableAt(i-1,e+1)&&n.push(c[e+1][i-1])}return n},l.prototype.clone=function(){for(var e,t=this.width,i=this.height,n=this.nodes,o=new l(t,i),r=new Array(i),a=0;a<i;++a)for(r[a]=new Array(t),e=0;e<t;++e)r[a][e]=new s(e,a,n[a][e].walkable);return o.nodes=r,o},t.exports=l},{"./DiagonalMovement":4,"./Node":7}],6:[function(e,t,i){t.exports={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},octile:function(e,t){var i=Math.SQRT2-1;return e<t?i*e+t:i*t+e},chebyshev:function(e,t){return Math.max(e,t)}}},{}],7:[function(e,t,i){t.exports=function(e,t,i){this.x=e,this.y=t,this.walkable=void 0===i||i}},{}],8:[function(e,t,i){function n(e){for(var t=[[e.x,e.y]];e.parent;)t.push([(e=e.parent).x,e.y]);return t.reverse()}function b(e,t,i,n){for(var o,r=Math.abs,a=[],s=r(i-e),l=r(n-t),h=e<i?1:-1,u=t<n?1:-1,p=s-l;a.push([e,t]),e!==i||t!==n;)-l<(o=2*p)&&(p-=l,e+=h),o<s&&(p+=s,t+=u);return a}i.backtrace=n,i.biBacktrace=function(e,t){return e=n(e),t=n(t),e.concat(t.reverse())},i.pathLength=function(e){for(var t,i,n,o=0,r=1;r<e.length;++r)i=(n=e[r-1])[0]-(t=e[r])[0],n=n[1]-t[1],o+=Math.sqrt(i*i+n*n);return o},i.interpolate=b,i.expandPath=function(e){var t,i,n,o,r,a=[],s=e.length;if(!(s<2)){for(o=0;o<s-1;++o)for(n=(i=b((t=e[o])[0],t[1],(t=e[o+1])[0],t[1])).length,r=0;r<n-1;++r)a.push(i[r]);a.push(e[s-1])}return a},i.smoothenPath=function(e,t){for(var i,n,o,r,a,s=t.length,l=t[0][0],h=t[0][1],u=t[s-1][0],p=t[s-1][1],c=l,d=h,f=[[c,d]],g=2;g<s;++g){for(o=b(c,d,(n=t[g])[0],n[1]),a=!1,i=1;i<o.length;++i)if(r=o[i],!e.isWalkableAt(r[0],r[1])){a=!0;break}a&&(lastValidCoord=t[g-1],f.push(lastValidCoord),c=lastValidCoord[0],d=lastValidCoord[1])}return f.push([u,p]),f},i.compressPath=function(e){if(e.length<3)return e;var t,i,n,o,r,a=[],s=e[0][0],l=e[0][1],h=e[1][0],u=e[1][1],p=h-s,c=u-l,d=Math.sqrt(p*p+c*c);for(p/=d,c/=d,a.push([s,l]),r=2;r<e.length;r++)t=h,i=u,n=p,o=c,p=(h=e[r][0])-t,c=(u=e[r][1])-i,c/=d=Math.sqrt(p*p+c*c),(p/=d)===n&&c===o||a.push([t,i]);return a.push([h,u]),a}},{}],9:[function(e,t,i){var y=e("heap"),k=e("../core/Util"),n=e("../core/Heuristic"),o=e("../core/DiagonalMovement");function r(e){this.allowDiagonal=(e=e||{}).allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||n.manhattan,this.weight=e.weight||1,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=e.heuristic||n.manhattan:this.heuristic=e.heuristic||n.octile}r.prototype.findPath=function(e,t,i,n,o){var r,a,s,l,h,u,p,c,d=new y(function(e,t){return e.f-t.f}),e=o.getNodeAt(e,t),f=o.getNodeAt(i,n),g=this.heuristic,b=this.diagonalMovement,v=this.weight,m=Math.abs,A=Math.SQRT2;for(e.g=0,e.f=0,d.push(e),e.opened=!0;!d.empty();){if((r=d.pop()).closed=!0,r===f)return k.backtrace(f);for(l=0,h=(a=o.getNeighbors(r,b)).length;l<h;++l)!(s=a[l]).closed&&(p=s.y,c=r.g+((u=s.x)-r.x==0||p-r.y==0?1:A),!s.opened||c<s.g)&&(s.g=c,s.h=s.h||v*g(m(u-i),m(p-n)),s.f=s.g+s.h,s.parent=r,s.opened?d.updateItem(s):(d.push(s),s.opened=!0))}return[]},t.exports=r},{"../core/DiagonalMovement":4,"../core/Heuristic":6,"../core/Util":8,heap:1}],10:[function(e,t,i){var n=e("./AStarFinder");function o(e){n.call(this,e);var i=this.heuristic;this.heuristic=function(e,t){return 1e6*i(e,t)}}o.prototype=new n,t.exports=o.prototype.constructor=o},{"./AStarFinder":9}],11:[function(e,t,i){var W=e("heap"),N=e("../core/Util"),n=e("../core/Heuristic"),o=e("../core/DiagonalMovement");function r(e){this.allowDiagonal=(e=e||{}).allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||n.manhattan,this.weight=e.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=e.heuristic||n.manhattan:this.heuristic=e.heuristic||n.octile}r.prototype.findPath=function(e,t,i,n,o){function r(e,t){return e.f-t.f}var a,s,l,h,u,p,c,d,f=new W(r),g=new W(r),b=o.getNodeAt(e,t),v=o.getNodeAt(i,n),m=this.heuristic,A=this.diagonalMovement,y=this.weight,k=Math.abs,M=Math.SQRT2;for(b.g=0,b.f=0,f.push(b),b.opened=1,v.g=0,v.f=0,g.push(v),v.opened=2;!f.empty()&&!g.empty();){for((a=f.pop()).closed=!0,h=0,u=(s=o.getNeighbors(a,A)).length;h<u;++h)if(!(l=s[h]).closed){if(2===l.opened)return N.biBacktrace(a,l);c=l.y,d=a.g+((p=l.x)-a.x==0||c-a.y==0?1:M),(!l.opened||d<l.g)&&(l.g=d,l.h=l.h||y*m(k(p-i),k(c-n)),l.f=l.g+l.h,l.parent=a,l.opened?f.updateItem(l):(f.push(l),l.opened=1))}for((a=g.pop()).closed=!0,h=0,u=(s=o.getNeighbors(a,A)).length;h<u;++h)if(!(l=s[h]).closed){if(1===l.opened)return N.biBacktrace(l,a);c=l.y,d=a.g+((p=l.x)-a.x==0||c-a.y==0?1:M),(!l.opened||d<l.g)&&(l.g=d,l.h=l.h||y*m(k(p-e),k(c-t)),l.f=l.g+l.h,l.parent=a,l.opened?g.updateItem(l):(g.push(l),l.opened=2))}}return[]},t.exports=r},{"../core/DiagonalMovement":4,"../core/Heuristic":6,"../core/Util":8,heap:1}],12:[function(e,t,i){var n=e("./BiAStarFinder");function o(e){n.call(this,e);var i=this.heuristic;this.heuristic=function(e,t){return 1e6*i(e,t)}}o.prototype=new n,t.exports=o.prototype.constructor=o},{"./BiAStarFinder":11}],13:[function(e,t,i){var d=e("../core/Util"),n=e("../core/DiagonalMovement");function o(e){this.allowDiagonal=(e=e||{}).allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=n.OnlyWhenNoObstacles:this.diagonalMovement=n.IfAtMostOneObstacle:this.diagonalMovement=n.Never)}o.prototype.findPath=function(e,t,i,n,o){var r,a,s,l,h,e=o.getNodeAt(e,t),t=o.getNodeAt(i,n),u=[],p=[],c=this.diagonalMovement;for(u.push(e),e.opened=!0,e.by=0,p.push(t),t.opened=!0,t.by=1;u.length&&p.length;){for((s=u.shift()).closed=!0,l=0,h=(r=o.getNeighbors(s,c)).length;l<h;++l)if(!(a=r[l]).closed)if(a.opened){if(1===a.by)return d.biBacktrace(s,a)}else u.push(a),a.parent=s,a.opened=!0,a.by=0;for((s=p.shift()).closed=!0,l=0,h=(r=o.getNeighbors(s,c)).length;l<h;++l)if(!(a=r[l]).closed)if(a.opened){if(0===a.by)return d.biBacktrace(a,s)}else p.push(a),a.parent=s,a.opened=!0,a.by=1}return[]},t.exports=o},{"../core/DiagonalMovement":4,"../core/Util":8}],14:[function(e,t,i){var n=e("./BiAStarFinder");function o(e){n.call(this,e),this.heuristic=function(e,t){return 0}}o.prototype=new n,t.exports=o.prototype.constructor=o},{"./BiAStarFinder":11}],15:[function(e,t,i){var d=e("../core/Util"),n=e("../core/DiagonalMovement");function o(e){this.allowDiagonal=(e=e||{}).allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=n.OnlyWhenNoObstacles:this.diagonalMovement=n.IfAtMostOneObstacle:this.diagonalMovement=n.Never)}o.prototype.findPath=function(e,t,i,n,o){var r,a,s,l,h,u=[],p=this.diagonalMovement,e=o.getNodeAt(e,t),c=o.getNodeAt(i,n);for(u.push(e),e.opened=!0;u.length;){if((s=u.shift()).closed=!0,s===c)return d.backtrace(c);for(l=0,h=(r=o.getNeighbors(s,p)).length;l<h;++l)(a=r[l]).closed||a.opened||(u.push(a),a.opened=!0,a.parent=s)}return[]},t.exports=o},{"../core/DiagonalMovement":4,"../core/Util":8}],16:[function(e,t,i){var n=e("./AStarFinder");function o(e){n.call(this,e),this.heuristic=function(e,t){return 0}}o.prototype=new n,t.exports=o.prototype.constructor=o},{"./AStarFinder":9}],17:[function(e,t,i){e("../core/Util");var n=e("../core/Heuristic"),v=e("../core/Node"),o=e("../core/DiagonalMovement");function r(e){this.allowDiagonal=(e=e||{}).allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||n.manhattan,this.weight=e.weight||1,this.trackRecursion=e.trackRecursion||!1,this.timeLimit=e.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=e.heuristic||n.manhattan:this.heuristic=e.heuristic||n.octile}r.prototype.findPath=function(e,t,i,n,c){for(var o,r,d=(new Date).getTime(),f=function(e,t){return this.heuristic(Math.abs(t.x-e.x),Math.abs(t.y-e.y))}.bind(this),g=function(e,t,i,n,o){if(0<this.timeLimit&&(new Date).getTime()-d>1e3*this.timeLimit)return 1/0;var r,a=t+f(e,b)*this.weight;if(i<a)return a;if(e==b)return n[o]=[e.x,e.y],e;for(var s,l,h=c.getNeighbors(e,this.diagonalMovement),u=0,p=1/0;r=h[u];++u){if(this.trackRecursion&&(r.retainCount=r.retainCount+1||1,!0!==r.tested)&&(r.tested=!0),(s=g(r,t+(l=r,(s=e).x===l.x||s.y===l.y?1:Math.SQRT2),i,n,o+1))instanceof v)return n[o]=[e.x,e.y],s;this.trackRecursion&&0==--r.retainCount&&(r.tested=!1),s<p&&(p=s)}return p}.bind(this),a=c.getNodeAt(e,t),b=c.getNodeAt(i,n),s=f(a,b);;){if((r=g(a,0,s,o=[],0))===1/0)return[];if(r instanceof v)return o;s=r}return[]},t.exports=r},{"../core/DiagonalMovement":4,"../core/Heuristic":6,"../core/Node":7,"../core/Util":8}],18:[function(e,t,i){e("../core/Util");var n=e("../core/DiagonalMovement");function o(e){this.allowDiagonal=(e=e||{}).allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=n.OnlyWhenNoObstacles:this.diagonalMovement=n.IfAtMostOneObstacle:this.diagonalMovement=n.Never)}o.prototype.findPath=function(e,t,i,n,o){for(var r=o.getNodeAt(e,t),a=o.getNodeAt(i,n),s=this.diagonalMovement,l={},h=0,u=[!(r.opened=!0),[]],p=0;;++p){if(!function e(t,i,n,o,r,a,s){if(0===a&&(i.opened=!0,i===n))t[0]=!0,t[1].push(n);else{var l="[x = "+i.x+", y = "+i.y+"]";if(!o[l]&&(i.closed=o[l]=!0,0<a))for(var h=r.getNeighbors(i,s),u=h.length,p=0;p<u;++p){var c=h[p];if(t[0])return;o["[x = "+c.x+", y = "+c.y+"]"]||e(t,c,n,o,r,a-1,s)}}}(u,r,a,l,o,p,s),u[0])return u[1].reverse();var c=Object.keys(l).length;if(h===c)return[];h=c,l={},u[1]=[]}},t.exports=o},{"../core/DiagonalMovement":4,"../core/Util":8}],19:[function(e,t,i){var n=e("./JumpPointFinderBase"),p=e("../core/DiagonalMovement");function o(e){n.call(this,e)}((o.prototype=new n).constructor=o).prototype._jump=function(e,t,i,n){var o=this.grid,i=e-i,n=t-n;if(!o.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(o.getNodeAt(e,t).tested=!0),o.getNodeAt(e,t)===this.endNode)return[e,t];if(0!=i&&0!=n){if(o.isWalkableAt(e-i,t+n)&&!o.isWalkableAt(e-i,t)||o.isWalkableAt(e+i,t-n)&&!o.isWalkableAt(e,t-n))return[e,t];if(this._jump(e+i,t,e,t)||this._jump(e,t+n,e,t))return[e,t]}else if(0!=i){if(o.isWalkableAt(e+i,t+1)&&!o.isWalkableAt(e,t+1)||o.isWalkableAt(e+i,t-1)&&!o.isWalkableAt(e,t-1))return[e,t]}else if(o.isWalkableAt(e+1,t+n)&&!o.isWalkableAt(e+1,t)||o.isWalkableAt(e-1,t+n)&&!o.isWalkableAt(e-1,t))return[e,t];return this._jump(e+i,t+n,e,t)},o.prototype._findNeighbors=function(e){var t,i,n,o,r,a=e.parent,s=e.x,l=e.y,h=this.grid,u=[];if(a)t=a.x,a=a.y,t=(s-t)/Math.max(Math.abs(s-t),1),a=(l-a)/Math.max(Math.abs(l-a),1),0!=t&&0!=a?(h.isWalkableAt(s,l+a)&&u.push([s,l+a]),h.isWalkableAt(s+t,l)&&u.push([s+t,l]),h.isWalkableAt(s+t,l+a)&&u.push([s+t,l+a]),h.isWalkableAt(s-t,l)||u.push([s-t,l+a]),h.isWalkableAt(s,l-a)||u.push([s+t,l-a])):0==t?(h.isWalkableAt(s,l+a)&&u.push([s,l+a]),h.isWalkableAt(s+1,l)||u.push([s+1,l+a]),h.isWalkableAt(s-1,l)||u.push([s-1,l+a])):(h.isWalkableAt(s+t,l)&&u.push([s+t,l]),h.isWalkableAt(s,l+1)||u.push([s+t,l+1]),h.isWalkableAt(s,l-1)||u.push([s+t,l-1]));else for(o=0,r=(i=h.getNeighbors(e,p.Always)).length;o<r;++o)n=i[o],u.push([n.x,n.y]);return u},t.exports=o},{"../core/DiagonalMovement":4,"./JumpPointFinderBase":24}],20:[function(e,t,i){var n=e("./JumpPointFinderBase"),p=e("../core/DiagonalMovement");function o(e){n.call(this,e)}((o.prototype=new n).constructor=o).prototype._jump=function(e,t,i,n){var o=this.grid,i=e-i,n=t-n;if(!o.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(o.getNodeAt(e,t).tested=!0),o.getNodeAt(e,t)===this.endNode)return[e,t];if(0!=i&&0!=n){if(o.isWalkableAt(e-i,t+n)&&!o.isWalkableAt(e-i,t)||o.isWalkableAt(e+i,t-n)&&!o.isWalkableAt(e,t-n))return[e,t];if(this._jump(e+i,t,e,t)||this._jump(e,t+n,e,t))return[e,t]}else if(0!=i){if(o.isWalkableAt(e+i,t+1)&&!o.isWalkableAt(e,t+1)||o.isWalkableAt(e+i,t-1)&&!o.isWalkableAt(e,t-1))return[e,t]}else if(o.isWalkableAt(e+1,t+n)&&!o.isWalkableAt(e+1,t)||o.isWalkableAt(e-1,t+n)&&!o.isWalkableAt(e-1,t))return[e,t];return o.isWalkableAt(e+i,t)||o.isWalkableAt(e,t+n)?this._jump(e+i,t+n,e,t):null},o.prototype._findNeighbors=function(e){var t,i,n,o,r,a=e.parent,s=e.x,l=e.y,h=this.grid,u=[];if(a)t=a.x,a=a.y,t=(s-t)/Math.max(Math.abs(s-t),1),a=(l-a)/Math.max(Math.abs(l-a),1),0!=t&&0!=a?(h.isWalkableAt(s,l+a)&&u.push([s,l+a]),h.isWalkableAt(s+t,l)&&u.push([s+t,l]),(h.isWalkableAt(s,l+a)||h.isWalkableAt(s+t,l))&&u.push([s+t,l+a]),!h.isWalkableAt(s-t,l)&&h.isWalkableAt(s,l+a)&&u.push([s-t,l+a]),!h.isWalkableAt(s,l-a)&&h.isWalkableAt(s+t,l)&&u.push([s+t,l-a])):0==t?h.isWalkableAt(s,l+a)&&(u.push([s,l+a]),h.isWalkableAt(s+1,l)||u.push([s+1,l+a]),h.isWalkableAt(s-1,l)||u.push([s-1,l+a])):h.isWalkableAt(s+t,l)&&(u.push([s+t,l]),h.isWalkableAt(s,l+1)||u.push([s+t,l+1]),h.isWalkableAt(s,l-1)||u.push([s+t,l-1]));else for(o=0,r=(i=h.getNeighbors(e,p.IfAtMostOneObstacle)).length;o<r;++o)n=i[o],u.push([n.x,n.y]);return u},t.exports=o},{"../core/DiagonalMovement":4,"./JumpPointFinderBase":24}],21:[function(e,t,i){var n=e("./JumpPointFinderBase"),f=e("../core/DiagonalMovement");function o(e){n.call(this,e)}((o.prototype=new n).constructor=o).prototype._jump=function(e,t,i,n){var o=this.grid,i=e-i,n=t-n;if(!o.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(o.getNodeAt(e,t).tested=!0),o.getNodeAt(e,t)===this.endNode)return[e,t];if(0!=i&&0!=n){if(this._jump(e+i,t,e,t)||this._jump(e,t+n,e,t))return[e,t]}else if(0!=i){if(o.isWalkableAt(e,t-1)&&!o.isWalkableAt(e-i,t-1)||o.isWalkableAt(e,t+1)&&!o.isWalkableAt(e-i,t+1))return[e,t]}else if(0!=n&&(o.isWalkableAt(e-1,t)&&!o.isWalkableAt(e-1,t-n)||o.isWalkableAt(e+1,t)&&!o.isWalkableAt(e+1,t-n)))return[e,t];return o.isWalkableAt(e+i,t)&&o.isWalkableAt(e,t+n)?this._jump(e+i,t+n,e,t):null},o.prototype._findNeighbors=function(e){var t,i,n,o,r=e.parent,a=e.x,s=e.y,l=this.grid,h=[];if(r){var u,p,c,d=r.x,r=r.y,d=(a-d)/Math.max(Math.abs(a-d),1),r=(s-r)/Math.max(Math.abs(s-r),1);0!=d&&0!=r?(l.isWalkableAt(a,s+r)&&h.push([a,s+r]),l.isWalkableAt(a+d,s)&&h.push([a+d,s]),l.isWalkableAt(a,s+r)&&l.isWalkableAt(a+d,s)&&h.push([a+d,s+r])):0!=d?(u=l.isWalkableAt(a+d,s),c=l.isWalkableAt(a,s+1),p=l.isWalkableAt(a,s-1),u&&(h.push([a+d,s]),c&&h.push([a+d,s+1]),p)&&h.push([a+d,s-1]),c&&h.push([a,s+1]),p&&h.push([a,s-1])):0!=r&&(u=l.isWalkableAt(a,s+r),d=l.isWalkableAt(a+1,s),c=l.isWalkableAt(a-1,s),u&&(h.push([a,s+r]),d&&h.push([a+1,s+r]),c)&&h.push([a-1,s+r]),d&&h.push([a+1,s]),c)&&h.push([a-1,s])}else for(n=0,o=(t=l.getNeighbors(e,f.OnlyWhenNoObstacles)).length;n<o;++n)i=t[n],h.push([i.x,i.y]);return h},t.exports=o},{"../core/DiagonalMovement":4,"./JumpPointFinderBase":24}],22:[function(e,t,i){var n=e("./JumpPointFinderBase"),p=e("../core/DiagonalMovement");function o(e){n.call(this,e)}((o.prototype=new n).constructor=o).prototype._jump=function(e,t,i,n){var o=this.grid,i=e-i,n=t-n;if(!o.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(o.getNodeAt(e,t).tested=!0),o.getNodeAt(e,t)===this.endNode)return[e,t];if(0!=i){if(o.isWalkableAt(e,t-1)&&!o.isWalkableAt(e-i,t-1)||o.isWalkableAt(e,t+1)&&!o.isWalkableAt(e-i,t+1))return[e,t]}else{if(0==n)throw new Error("Only horizontal and vertical movements are allowed");if(o.isWalkableAt(e-1,t)&&!o.isWalkableAt(e-1,t-n)||o.isWalkableAt(e+1,t)&&!o.isWalkableAt(e+1,t-n))return[e,t];if(this._jump(e+1,t,e,t)||this._jump(e-1,t,e,t))return[e,t]}return this._jump(e+i,t+n,e,t)},o.prototype._findNeighbors=function(e){var t,i,n,o,r,a=e.parent,s=e.x,l=e.y,h=this.grid,u=[];if(a)t=a.x,a=a.y,t=(s-t)/Math.max(Math.abs(s-t),1),a=(l-a)/Math.max(Math.abs(l-a),1),0!=t?(h.isWalkableAt(s,l-1)&&u.push([s,l-1]),h.isWalkableAt(s,l+1)&&u.push([s,l+1]),h.isWalkableAt(s+t,l)&&u.push([s+t,l])):0!=a&&(h.isWalkableAt(s-1,l)&&u.push([s-1,l]),h.isWalkableAt(s+1,l)&&u.push([s+1,l]),h.isWalkableAt(s,l+a))&&u.push([s,l+a]);else for(o=0,r=(i=h.getNeighbors(e,p.Never)).length;o<r;++o)n=i[o],u.push([n.x,n.y]);return u},t.exports=o},{"../core/DiagonalMovement":4,"./JumpPointFinderBase":24}],23:[function(e,t,i){var n=e("../core/DiagonalMovement"),o=e("./JPFNeverMoveDiagonally"),r=e("./JPFAlwaysMoveDiagonally"),a=e("./JPFMoveDiagonallyIfNoObstacles"),s=e("./JPFMoveDiagonallyIfAtMostOneObstacle");t.exports=function(e){return new((e=e||{}).diagonalMovement===n.Never?o:e.diagonalMovement===n.Always?r:e.diagonalMovement===n.OnlyWhenNoObstacles?a:s)(e)}},{"../core/DiagonalMovement":4,"./JPFAlwaysMoveDiagonally":19,"./JPFMoveDiagonallyIfAtMostOneObstacle":20,"./JPFMoveDiagonallyIfNoObstacles":21,"./JPFNeverMoveDiagonally":22}],24:[function(e,t,i){var l=e("heap"),h=e("../core/Util"),b=e("../core/Heuristic");e("../core/DiagonalMovement");function n(e){this.heuristic=(e=e||{}).heuristic||b.manhattan,this.trackJumpRecursion=e.trackJumpRecursion||!1}n.prototype.findPath=function(e,t,i,n,o){var r,a=this.openList=new l(function(e,t){return e.f-t.f}),e=this.startNode=o.getNodeAt(e,t),s=this.endNode=o.getNodeAt(i,n);for(this.grid=o,e.g=0,e.f=0,a.push(e),e.opened=!0;!a.empty();){if((r=a.pop()).closed=!0,r===s)return h.expandPath(h.backtrace(s));this._identifySuccessors(r)}return[]},n.prototype._identifySuccessors=function(e){for(var t,i,n,o,r=this.grid,a=this.heuristic,s=this.openList,l=this.endNode.x,h=this.endNode.y,u=e.x,p=e.y,c=Math.abs,d=this._findNeighbors(e),f=0,g=d.length;f<g;++f)i=d[f],(i=this._jump(i[0],i[1],u,p))&&(t=i[0],i=i[1],!(o=r.getNodeAt(t,i)).closed)&&(n=b.octile(c(t-u),c(i-p)),n=e.g+n,!o.opened||n<o.g)&&(o.g=n,o.h=o.h||a(c(t-l),c(i-h)),o.f=o.g+o.h,o.parent=e,o.opened?s.updateItem(o):(s.push(o),o.opened=!0))},t.exports=n},{"../core/DiagonalMovement":4,"../core/Heuristic":6,"../core/Util":8,heap:1}]},{},[3])(3)});
